<!--Filename: index.html-->
<!--Description: this HTML file serves as the index of the webpage and our UI-->
<!--Authors: Kevin Lopez-->
<!--cwid: 889508465-->
<!--email: kevinlopez8554@csu.fullerton.edu-->

<!--Emiliano Arranaga-->
<!--email: earranaga1202@csu.fullerton.edu-->
<!--cwid: 888006756-->

<!doctype html>
<html lang="en">
<head>
    <title>Project 1</title>

    <link href="../files/styles.css" rel="stylesheet">


</head>

<body>

<h1>Project 2</h1>

<div id="columnContainer" class="row">
    <div id="diveOne" class="column">
        <canvas id="first" class="canvasItem"></canvas>
    </div>
    <div id="diveTwo" class="column">
        <canvas id="second" class="canvasItem"></canvas>
    </div>
    <div id="diveThree" class="column">
        <canvas id="third" class="canvasItem"></canvas>
    </div>
    <div id="diveFour" class="column">
        <canvas id="fourth" class="canvasItem"></canvas>
    </div>
</div>
</body>


<script>

    var colOneList = [];
    var colTwoList = [];
    var colThreeList = [];
    var colFourList = [];
    let canvasOne = document.getElementById("first");
    var parent = document.getElementById("diveOne");
    canvasOne.width = parent.offsetWidth;
    canvasOne.height = parent.offsetHeight;
    let contx1 = canvasOne.getContext("2d");

    let canvasTwo = document.getElementById("second");
    var parentTwo = document.getElementById("diveTwo");
    canvasTwo.width = parentTwo.offsetWidth;
    canvasTwo.height = parentTwo.offsetHeight;
    let contx2 = canvasTwo.getContext("2d");

    let canvasThree = document.getElementById("third");
    var parentThree = document.getElementById("diveThree");
    canvasThree.width = parentThree.offsetWidth;
    canvasThree.height = parentThree.offsetHeight;
    let contx3 = canvasThree.getContext("2d");

    let canvasFour = document.getElementById("fourth");
    var parentFour = document.getElementById("diveFour");
    canvasFour.width = parentFour.offsetWidth;
    canvasFour.height = parentFour.offsetHeight;
    let contx4 = canvasFour.getContext("2d");
    draw_grid(contx1, 1, 42, 'white', "MergeSort");
    draw_grid(contx2, 1, 42, 'white', "Insertion Sort");
    draw_grid(contx3, 1, 42, 'white', "Gold Sort");
    draw_grid(contx4, 1, 42, 'white', "QuickSort");

    //canvas 1
    contx1.font = '15px Arial';
    contx1.fillStyle = "white";
    contx1.textAlign = "center";
    contx1.textBaseline = "middle";
    contx3.font = '15px Arial';
    contx3.fillStyle = "white";
    contx3.textAlign = "center";
    contx3.textBaseline = "middle";
    let nWidth =  contx1.canvas.width / 2;

    var myArray =     [5, 'F', 7, 'D', 8, 'A', 1, 5, 9, 3, 'B', 4, 7, 'B', 8];
    var secondArray = [5, 'F', 7, 'D', 8, 'A', 1, 5, 9, 3, 'B', 4, 7, 'B', 8];
    // arrayComparer(myArray,secondArray);
    var testArray =     [5, 'F', 7, 'D', 8, 'A', 1, 5, 9, 3, 'B', 4, 7, 'B', 8];

    convertToDecimal(testArray);
    convertToDecimal(secondArray);
    // myArray = ringAround(testArray);
    ringAround(testArray);
    console.log("myarray: " + testArray);
    console.log("seconda: " + secondArray);

    var heightIncrement = contx1.canvas.height / 42;
    var yvalue = 10;


    colOneList[0] = testArray.toString();
    colTwoList[0] = testArray.toString();
    colThreeList[0] = testArray.toString();
    colFourList[0] = testArray.toString();


    // convertToDecimal(testArray);


    run();
    async function run(){
        while(true){
            if(!arrayComparer(testArray, secondArray)){
                contx1.clearRect(0,0, contx1.canvas.width, contx1.canvas.height);
                draw_grid(contx1, 1, 42, 'white', "MergeSort");
                console.log("while says not true");
                console.log(testArray.toString());
                mergeSort(testArray); //mergesort
                // printLists(); //print the list
                for(var pep = 0; pep < colOneList.length; pep++){
                    yvalue+= heightIncrement;
                    console.log("inside for");
                    console.log("PEP: "  +colOneList[pep]);
                    contx1.fillText(colOneList[pep], nWidth, yvalue);
                    await sleep(10);
                }
                yvalue = 10;

                //now we need to clear the list
                // while (colOneList.length) { colOneList.pop(); }

                testArray =  ringAround(testArray); //shift array stuff
                while (colOneList.length) { colOneList.pop(); }
                colOneList[0] = testArray;
                console.log("isdie col: "  +colOneList.toString());



            }else if(arrayComparer(testArray, secondArray)){

                console.log("all the way around time to break;");
                break;
            }


        }
    }





    function arrayComparer(arr1, arr2){
        var equal = false;
        if(arr1.length === arr2.length){
            for(var x = 0; x<=arr1.length; x++){
                if(arr1[x] === arr2[x]){
                    console.log("equals: " + arr1[x] + " : " + arr2[x]);
                    equal = true;
                }
                else {
                    equal = false;
                    break;
                    // console.log("not equals: " + arr1[x] + " : " + arr2[x]);
                }
            }
            return equal;
        }
    }

    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
    async function printLists(){
        var heightIncrement = contx1.canvas.height / 42;
        var yvalue = 10;
        for(var x = 0; x < 42; x++){
            yvalue += heightIncrement;
            if(colOneList[x] != null){
                contx1.fillText(colOneList[x], nWidth, yvalue);
            }
            if(colTwoList[x] != null){
                contx3.fillText(colTwoList[x], nWidth, yvalue);
            }
            if(colThreeList[x] != null){
                contx2.fillText(colThreeList[x], nWidth, yvalue);
            }
            if(colFourList[x] != null){
                contx4.fillText(colFourList[x], nWidth, yvalue);
            }
            await sleep(500);
        }

    }
    //draws a grid
    function draw_grid(ctxz, min, maj, stroke_, name) {
        //setting the grid size
        let width = ctxz.canvas.width;
        let height = ctxz.canvas.height;


        let textX = width / 2;


        for (let ix = 0; ix < width; ix += width / min) {
            ctxz.beginPath();
            ctxz.moveTo(ix, 0);
            ctxz.lineTo(ix, height);
            ctxz.strokeStyle = stroke_;
            ctxz.lineWidth = 2;
        }
        for (let iy = 0; iy < height; iy += height / maj) {

            ctxz.beginPath();
            ctxz.moveTo(0, iy);
            ctxz.lineTo(width, iy);
            ctxz.strokeStyle = stroke_;
            ctxz.lineWidth = 2;
        }
        ctxz.font = '15px Arial';
        ctxz.fillStyle = "white";
        ctxz.textAlign = "center";
        ctxz.textBaseline = "middle";
        ctxz.fillText(name, textX, 10);

    }
    function convertBackToHex(arrayToConvert) {
        for (var item in arrayToConvert) {
            hexValue = arrayToConvert[item].toString(16);
            arrayToConvert[item] = hexValue;
        }
    }
    //inspired by stackOverflow, geeksforgeeks, and tutorialpoint
    function convertToDecimal(ArrToDecimal) {
        for (var index in ArrToDecimal) {
            var newNumber = parseInt(ArrToDecimal[index].toString(), 16);
            ArrToDecimal[index] = newNumber;
        }
    }
    function mergeSort (unsortedArray) {


        // No need to sort the array if the array only has one element or empty
        if (unsortedArray.length <= 1) {
            return unsortedArray;
        }


        //get the middle of the array
        const middle = Math.floor(unsortedArray.length / 2);


        //create left and right arrays
        const left = unsortedArray.slice(0, middle);
        const right = unsortedArray.slice(middle);


        //we call it recursiveley
        return merge(
            mergeSort(left), mergeSort(right)
        );
    }
    // Merge the two arrays
    function merge (left, right) {

        let resultArray = [], leftIndex = 0, rightIndex = 0;

        // We will concatenate values into the resultArray in order
        while (leftIndex < left.length && rightIndex < right.length) {
            if (left[leftIndex] < right[rightIndex]) {
                resultArray.push(left[leftIndex]);
                leftIndex++; // move left array point
            } else {
                resultArray.push(right[rightIndex]);
                rightIndex++; // move right array point
            }
        }

        var printArray = resultArray.concat(left.slice(leftIndex)).concat(right.slice(rightIndex));
        convertBackToHex(printArray);
        colOneList.push(printArray);
        // We need to combine both  to the resultArray cause there'll be one element left over after the while loop
        return resultArray
            .concat(left.slice(leftIndex))
            .concat(right.slice(rightIndex));
    }
    //so apparently gold pore sort was another way of saying evenOddSort
    //code inspired from lesson on GeeksforGeeks.com C++ oddEvenSort
    function evenOddSort(inputArray){
        var count3 = 0;
        var evens = [];
        var odds = [];
        var result = [];
        for(var i in inputArray){
            if(inputArray[i]%2 == 0){
                evens.push(inputArray[i]);
            }
            else {
                odds.push(inputArray[i]);
            }
            convertBackToHex(evens);
            convertBackToHex(odds);
            colTwoList.push((evens + "  ".repeat(6) + odds).toString());
            convertToDecimal(evens);
            convertToDecimal(odds);
        }
    }
    function insertionSort(insertionArray){
        for(let i = 1; i < insertionArray.length; i++){

            for(let j = i; j> 0; j--){
                if (insertionArray[j] < insertionArray[j - 1]) {
                    const temp = insertionArray[j];
                    insertionArray[j] = insertionArray[j - 1];
                    insertionArray[j - 1] = temp;
                }
                else
                    break;
                convertBackToHex(insertionArray);
                colThreeList.push((insertionArray).toString());
                convertToDecimal(insertionArray);

            }

        }

    }



    function quickSort(quickArray){
        if(quickArray.length  <= 1){
            return quickArray;
        }

        const pivot = quickArray[quickArray.length - 1];
        const left = [];
        const right = [];

        for (let i = 0; i < quickArray.length - 1; i++) {
            if(quickArray[i] < pivot){
                left.push(quickArray[i])
            }
            else{
                right.push(quickArray[i]);
            }
            colFourList.push((quickArray).toString());
        }

        if (left.length > 0 && right.length > 0){
            return[...quickSort(left), pivot, ...quickSort(right)];
        }
        else if (left.length > 0){
            return [...quickSort(left), pivot];
        }
        else{
            return [pivot, ...quickSort(right)];

        }

    }
    //ring function inspired from stackoverflow and geeksforgeeks
    function ringAround(arr, reverse) {
        if (reverse) arr.unshift(arr.pop());
        else arr.push(arr.shift());
        return arr;

    }

</script>
</html>